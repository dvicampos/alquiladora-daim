<h2 class="text-center my-4">Dashboard</h2>
<div class="container text-center">
  <p>Bienvenido, {{user.name}}</p>
<div class="btn-group-horizontal my-4 d-flex justify-content-between">
    <a href="/inflables" class="btn btn-primary d-flex flex-column align-items-center">
        <img class="rounded" src="/img/inflables.png" alt="" style="width: 100px;">
        Inflables
    </a>
    <a href="/lonas" class="btn btn-primary d-flex flex-column align-items-center">
        <img class="rounded" src="/img/lona.png" alt="" style="width: 100px;">
        Lonas
    </a>
    <a href="/sillas" class="btn btn-primary d-flex flex-column align-items-center">
        <img class="rounded" src="/img/silla.png" alt="" style="width: 100px;">
        Silla
    </a>
    <a href="/mesas" class="btn btn-primary d-flex flex-column align-items-center">
        <img class="rounded" src="/img/mesa.png" alt="" style="width: 100px;">
        Mesa
    </a>
    <a href="/mantelerias" class="btn btn-primary d-flex flex-column align-items-center">
        <img class="rounded" src="/img/manteleria.png" alt="" style="width: 100px;">
        Manteleria
    </a>
    <a href="/ventas" class="btn btn-primary d-flex flex-column align-items-center">
        <img class="rounded" src="/img/venta.png" alt="" style="width: 100px;">
        Venta
    </a>
    <a href="/logout" class="btn btn-danger d-flex flex-column align-items-center">
        <img class="rounded" src="/img/cerrar.png" alt="" style="width: 100px;">
        Cerrar Sesión
    </a>
</div>


  <div class="d-flex justify-content-center">
    <div style="width: 50%; margin-right: 10px;">
      <h3 class="my-4">Stock de Inflables</h3>
      <canvas id="inflableStockChart" width="400" height="200"></canvas>
    </div>

    <div style="width: 50%;">
      <h3 class="my-4">Stock de Lonas</h3>
      <canvas id="lonaStockChart" width="400" height="200"></canvas>
    </div>
  </div>
  <div class="d-flex justify-content-center">
    <div style="width: 50%; margin-right: 10px;">
      <h3 class="my-4">Stock de Mesas</h3>
      <canvas id="mesaStockChart" width="400" height="200"></canvas>
    </div>

    <div style="width: 50%;">
      <h3 class="my-4">Stock de Silla</h3>
      <canvas id="sillaStockChart" width="400" height="200"></canvas>
    </div>
  </div>
</div>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    fetch('/api/stock-data')
      .then(response => response.json())
      .then(data => {
        // Gráfica de Inflables
        const inflableCtx = document.getElementById('inflableStockChart').getContext('2d');
        const inflableLabels = data.inflableStock.map(item => item.tipo);
        const inflableData = data.inflableStock.map(item => item.stock);

        const inflableStockChart = new Chart(inflableCtx, {
          type: 'line',
          data: {
            labels: inflableLabels,
            datasets: [{
              label: 'Stock de Inflables',
              data: inflableData,
              backgroundColor: 'rgba(75, 192, 192, 0.2)',
              borderColor: 'rgba(75, 192, 192, 1)',
              borderWidth: 1,
              fill: false,
              tension: 0.1
            }]
          },
          options: {
            scales: {
              y: {
                beginAtZero: true
              }
            }
          }
        });
        // Gráfica de Mesas
        const mesaCtx = document.getElementById('mesaStockChart').getContext('2d');
        const mesaLabels = data.mesaStock.map(item => item.tipo);
        const mesaData = data.mesaStock.map(item => item.stock);

        const mesaStockChart = new Chart(mesaCtx, {
          type: 'line',
          data: {
            labels: mesaLabels,
            datasets: [{
              label: 'Stock de mesas',
              data: mesaData,
              backgroundColor: 'rgba(75, 192, 192, 0.2)',
              borderColor: 'rgba(75, 192, 192, 1)',
              borderWidth: 1,
              fill: false,
              tension: 0.1
            }]
          },
          options: {
            scales: {
              y: {
                beginAtZero: true
              }
            }
          }
        });
        // Gráfica de Sillas
        const sillaCtx = document.getElementById('sillaStockChart').getContext('2d');
        const sillaLabels = data.sillaStock.map(item => item.tipo);
        const sillaData = data.sillaStock.map(item => item.stock);

        const sillaStockChart = new Chart(sillaCtx, {
          type: 'line',
          data: {
            labels: sillaLabels,
            datasets: [{
              label: 'Stock de sillas',
              data: sillaData,
              backgroundColor: 'rgba(75, 192, 192, 0.2)',
              borderColor: 'rgba(75, 192, 192, 1)',
              borderWidth: 1,
              fill: false,
              tension: 0.1
            }]
          },
          options: {
            scales: {
              y: {
                beginAtZero: true
              }
            }
          }
        });

        // Gráfica de Lonas
        const lonaCtx = document.getElementById('lonaStockChart').getContext('2d');
        const lonaLabels = data.lonaStock.map(item => item.tipo);
        const lonaData = data.lonaStock.map(item => item.stock);

        const lonaStockChart = new Chart(lonaCtx, {
          type: 'line',
          data: {
            labels: lonaLabels,
            datasets: [{
              label: 'Stock de Lonas',
              data: lonaData,
              backgroundColor: 'rgba(153, 102, 255, 0.2)',
              borderColor: 'rgba(153, 102, 255, 1)',
              borderWidth: 1,
              fill: false,
              tension: 0.1
            }]
          },
          options: {
            scales: {
              y: {
                beginAtZero: true
              }
            }
          }
        });
      });
  });
</script>
